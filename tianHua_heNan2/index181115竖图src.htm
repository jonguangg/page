<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" name="page-view-size" content="text/html; charset=utf-8" />
<title>天华首页</title>
<style>
	*{margin:0px;padding:0px;border:0px;font-family:SimHei;border-radius:0.2em;background-size:100% 100% !important;}
	img{width:100%;height:100%;}
	.nav{position:absolute;top:100px;width:120px;height:40px; line-height:40px;color:#b2c8e1;text-align:center;font-size:20px;}
	.followImg{position:absolute;top:272px;width:150px;height:200px; background:url(img/null.png);z-index:2;}
	.followName{position:relative;top:103%;width:100%;height:40px; text-align:center;color:white; font-size:16px; z-index:2;}
</style>

<script type=text/javascript src="global.js" charset=UTF-8></script>
<script type=text/javascript src="keyIndex.js"></script>
<script type=text/javascript src="data/indexArr.js"></script>
<script type=text/javascript src="data/followArr.js"></script>
<script>
var indexArea = 'nav';//getCookie("indexArea")?getCookie("indexArea"):"nav";
var indexNavPos = getCookie("indexNavPos")?parseInt(getCookie("indexNavPos")):0;
var indexListPos = getCookie("indexListPos")?parseInt(getCookie("indexListPos")):0;
var indexLoopPos = 0;
//var listPos = 0;//初始化列表页焦点位置，使得从首页进入列表时焦点默认为0 
//var pagePos = 0;
var from = 'indexList';

try{
	/**
	 * 进入首页，设置广西机顶盒浏览器将返回键，退出键，首页键事件发送至页面。使得页面可以捕获该三个键的按键事件。
	 */
	// 首页键
	iPanel.setGlobalVar("SEND_FIRSTPAGE_KEY_TO_PAGE","1");
	// 退出键
	iPanel.setGlobalVar("SEND_EXIT_KEY_TO_PAGE","1");
	// 返回键
	iPanel.setGlobalVar("SEND_RETURN_KEY_TO_PAGE","1");
}catch(e){}

function showList(){
	$('indexImg0').src = indexArr[0].loop[indexLoopPos%3].poster169;
	$('indexImg1').src = indexArr[1].loop[indexLoopPos%3].poster169;
//	$('corner0').src = indexArr[0].loop[indexLoopPos%3].corner;
	for(i=2;i<6;i++){
		$('indexImg'+i).src = indexArr[i].posterList
//		$('corner'+i).src = indexArr[i].corner
	}
}
function changeList(_num){
	if(_num!=0 || (_num==0 && indexArea!='list') ){
		$('indexList'+indexListPos).style.left = parseInt( $('indexList'+indexListPos).style.left )+10+'px';
		$('indexList'+indexListPos).style.top = parseInt( $('indexList'+indexListPos).style.top )+10+'px';
		$('indexList'+indexListPos).style.width = parseInt( $('indexList'+indexListPos).style.width )-20+'px';
		$('indexList'+indexListPos).style.height = parseInt( $('indexList'+indexListPos).style.height )-20+'px';
		
		$('corner'+indexListPos).style.left = parseInt( $('indexList'+indexListPos).style.width )-54+'px';
		$('corner'+indexListPos).style.top = -parseInt( $('indexList'+indexListPos).style.height )+'px';
	}
	indexListPos += _num;
	if( indexListPos<0 ){
		indexListPos=0;
	}
	if(indexArea=='list'){
		$('indexList'+indexListPos).style.left = parseInt( $('indexList'+indexListPos).style.left )-10+'px';
		$('indexList'+indexListPos).style.top = parseInt( $('indexList'+indexListPos).style.top )-10+'px';
		$('indexList'+indexListPos).style.width = parseInt( $('indexList'+indexListPos).style.width )+20+'px';
		$('indexList'+indexListPos).style.height = parseInt( $('indexList'+indexListPos).style.height )+20+'px';
		
		$('corner'+indexListPos).style.left = parseInt( $('indexList'+indexListPos).style.width )-54+'px';
		$('corner'+indexListPos).style.top = -parseInt( $('indexList'+indexListPos).style.height )+'px';
	}
}
function randomString(len){
//　　var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/
  var chars = 'ABCDEF0123456789';
　　var maxPos = chars.length;
　　var pwd = '';
　　for (j = 0; j < len; j++) {
　　　　pwd += chars.charAt(Math.floor(Math.random() * maxPos));
　　}
　　return pwd;
}
function loop(){//setInterval不能带参数，所以加了这个函数
	$('circle'+indexLoopPos%3).style.backgroundColor = 'gray';
	$('circles'+indexLoopPos%3).style.backgroundColor = 'gray';
	indexLoopPos ++;
	$('indexImg0').src = indexArr[0].loop[indexLoopPos%3].poster169;
	$('indexImg1').src = indexArr[1].loop[indexLoopPos%3].poster169;
//	var col = randomString(6);//随机生成颜色
	$('circle'+indexLoopPos%3).style.backgroundColor = 'white';//'#'+col;
	$('circles'+indexLoopPos%3).style.backgroundColor = 'white';//'#'+col;
/*	if( $('login').style.display=='block' && parseInt($('seconds').innerHTML)>1){
		$('seconds').innerHTML = parseInt( $('seconds').innerHTML )-1;
	}else{
		$('login').style.display = 'none';
	}*/
}
setInterval(loop, 1000);

function changeNav(_num){
	$('nav'+indexNavPos).style.color = '#b2c8e1';
	$('nav'+indexNavPos).style.fontSize = '24px';
	indexNavPos += _num;
	if(indexNavPos<0){
		indexNavPos = 0;
	}
	if(indexNavPos>8){
		indexNavPos = 8;
	}
	$('nav'+indexNavPos).style.color = '#00d2e1';
	$('nav'+indexNavPos).style.fontSize = (indexArea=='nav')?'30px':'24px';
	changeFocusBg();
}

function changeFocusBg(){
	$('focusImg').src = 'img/null.png';//网络不好时切换焦点，图片变化很慢，故先将焦点图片清除
	if(indexArea=='nav'){
		$('focusDiv').style.left = (indexNavPos==0)?'58px':18+110*indexNavPos+'px';
		$('focusDiv').style.top = '93px';
		$('focusDiv').style.width = (indexNavPos==0)?'120px':'150px';
		$('focusDiv').style.height = '103px';
		$('focusImg').src = 'img/focusIndexNav.png';
	}else if(indexArea=='list'){
		$('focusDiv').style.left = (parseInt($('indexList'+indexListPos).style.left)-23)+'px';
		$('focusDiv').style.top = (parseInt($('indexList'+indexListPos).style.top)-23)+'px';
		$('focusDiv').style.width = (parseInt($('indexList'+indexListPos).style.width)+46)+'px';
		$('focusDiv').style.height = (parseInt($('indexList'+indexListPos).style.height)+46)+'px';
		$('focusImg').src = 'img/focusIndex'+indexListPos+'.png';		
	}else if( indexArea=='follow'){
		$('focusDiv').style.left = (parseInt($('follow'+followPos).style.left)-23)+'px';
		$('focusDiv').style.top = '244px';
		$('focusDiv').style.width = '208px';
		$('focusDiv').style.height = '259px';
		$('focusImg').src = 'img/Focusfollow.png';
	}else{
		$('focusImg').src = 'img/null.png';
	}
}
function changeMyBg(){
	$('mineImg').src = (indexArea=='mine')?'img/mine1.png':'img/mine0.png';
	$('mine').style.left = (indexArea=='mine')?'41px':'51px';
	$('mine').style.top = (indexArea=='mine')?'442px':'452px';
	$('mine').style.width = (indexArea=='mine')?'215px':'195px';
	$('mine').style.height = (indexArea=='mine')?'215px':'195px';
}
function changeRightCornerBg(){
	$('home').src = (indexArea=='home')?'img/home1.png':'img/home0.png';
	$('search').src = (indexArea=='search')?'img/search1.png':'img/search0.png';
}
var followHidden = 0;
function showFollow(){
	$('follow').style.display = 'block';
	for(i=0;i<6;i++){
		if( followArr[i+followHidden] ){
			$('follow'+i).style.backgroundImage ='url('+followArr[i+followHidden].posterList+')';
			$('followName'+i).innerHTML = followArr[i+followHidden].name.slice(0,9);
		}
	}
	if(followArr.length>6){
		$('follow0').style.left = '92px';
	}else{
		$('follow0').style.left = 92+94.5*(6-followArr.length)+'px';
	}
	for(i=1;i<followArr.length;i++){
		if(i<6){
			$('follow'+i).style.left = parseInt($('follow0').style.left)+189*i+'px';
		}
	}
}
var followPos = 0;
function changeFollow(_num){
	$('followName'+followPos).innerHTML = followArr[followPos+followHidden].name.slice(0,9);
	if(_num!=0 || (_num==0 && indexArea!='follow') ){
		$('follow'+followPos).style.left = parseInt($('follow'+followPos).style.left)+6+'px';
		$('follow'+followPos).style.top = '272px';
		$('follow'+followPos).style.width = '150px';
		$('follow'+followPos).style.height= '200px';
	}
	followPos += _num;
	if( followPos<0 ){
		followPos=0;
		if( followHidden>0){
			followHidden --;
			showFollow();
		}
	}
	if( followPos+followHidden>followArr.length-1){//到最后一个了，就移到第1个
		followPos=0;
		followHidden=0;
		showFollow();
	}
	if( followPos>5){//到第6个就隐藏目前显示的前面第1个
		followPos=5;
		followHidden ++;
		showFollow();
	}
	if(indexArea=='follow'){
		$('follow'+followPos).style.left = parseInt($('follow'+followPos).style.left)-6+'px';
		$('follow'+followPos).style.top = '265px';
		$('follow'+followPos).style.width = '162px';
		$('follow'+followPos).style.height= '215px';
	}
	if( followArr[followPos+followHidden].name.length>9){
		$('followName'+followPos).innerHTML = '<marquee behavior="scroll" direction="left" width="95%" scrollamonut="100" scrolldelay="300">'+followArr[followPos+followHidden].name+'</marquee>';
	}
	changeFocusBg();
}
function init(){
	showList();
	changeNav(0);
	if( indexArea=='mine'){
		changeMyBg();
	}
/*	if( followArr.length>0){
		indexArea ='follow';
		showFollow();
		changeFollow(0);
	}*/
}
</script>
</head>
<body bgcolor="transparent" leftmargin="0" topmargin="0" onload="init();">

<div style="position:absolute;left:0px;top:0px;width:1280px;height:720px; background:url(img/index.jpg); border-radius:0em;"></div>
<!-- 左上角图标 -->
<div style="position:absolute;left:70px;top:25px;width:140px;height:62px;"><img src="img/logo.png"/></div>
<!-- 首页 -->
<div style="position:absolute;left:1141px;top:25px;width:64px;height:79px;"><img id="home" src="img/home0.png"/></div>
<!-- 搜索 -->
<div style="position:absolute;left:1199px;top:25px;width:64px;height:79px;"><img id="search" src="img/search0.png"/></div>
<!-- 分割线 -->
<div style="position:absolute;left:9px;top:144px;width:1194px;height:1px;"><img src="img/line.png"/></div>
<!-- 导航 -->
<div id="nav0" class="nav" style="left:78px;width:80px;">主页</div>
<div id="nav1" class="nav" style="left:148px;">新片上架</div>
<div id="nav2" class="nav" style="left:258px;">超级影院</div>
<div id="nav3" class="nav" style="left:368px;">魅力剧场</div>
<div id="nav4" class="nav" style="left:478px;">动漫天地</div>
<div id="nav5" class="nav" style="left:588px;">探索百科</div>
<div id="nav6" class="nav" style="left:698px;">综艺休闲</div>
<div id="nav7" class="nav" style="left:808px;">专题集锦</div>
<div id="nav8" class="nav" style="left:918px;">限时免费</div>

<!-- 轮图圆点1 -->
<div id="circle0" style="position:absolute;left:500px;top:440px;width:10px;height:10px;background-color:white;border-radius:50%;z-index:1;"></div>
<div id="circle1" style="position:absolute;left:520px;top:440px;width:10px;height:10px;background-color:gray;border-radius:50%;z-index:1;"></div>
<div id="circle2" style="position:absolute;left:540px;top:440px;width:10px;height:10px;background-color:gray;border-radius:50%;z-index:1;"></div>

<!-- 轮图圆点2 -->
<div id="circles0" style="position:absolute;left:860px;top:610px;width:10px;height:10px;background-color:white;border-radius:50%;z-index:1;"></div>
<div id="circles1" style="position:absolute;left:880px;top:610px;width:10px;height:10px;background-color:gray;border-radius:50%;z-index:1;"></div>
<div id="circles2" style="position:absolute;left:900px;top:610px;width:10px;height:10px;background-color:gray;border-radius:50%;z-index:1;"></div>

<!-- 个人中心 -->
<div id="mine" style="position:absolute;left:51px;top:452px;width:195px;height:195px"><img id="mineImg" src="img/mine0.png"/></div>

<!-- 左侧大图0 -->
<div id="indexList0" style="position:absolute;left:70px;top:178px;width:498px;height:280px">
	<img id="indexImg0" src="img/null.png"/>
    <img id="corner0" style="position:relative;width:54px;height:55px;left:444px;top:-280px" src="img/free.png" />
</div>

<!-- 中间长图1 -->
<div id="indexList1" style="position:absolute;left:581px;top:178px;width:338px;height:450px">
	<img id="indexImg1" src="images/main_center_poster.png"/>
    <img id="corner1" style="position:relative;width:54px;height:55px;left:284px;top:-450px" src="img/free.png" />
</div>

<!-- 右上小图2 -->
<div id="indexList2" style="position:absolute;left:932px;top:178px;width:280px;height:280px">
	<img id="indexImg2" src="img/null.png"/>
    <img id="corner2" style="position:relative;width:54px;height:55px;left:226px;top:-280px" src="img/free.png" />
</div>

<!-- 左下中小图3 -->
<div id="indexList3" style="position:absolute;left:241px;top:471px;width:157px;height:157px">
	<img id="indexImg3" src="img/null.png"/>
    <img id="corner3" style="position:relative;width:54px;height:55px;left:103px;top:-157px" src="img/free.png" />
</div>

<!-- 左下右小图4 -->
<div id="indexList4" style="position:absolute;left:411px;top:471px;width:157px;height:157px">
	<img id="indexImg4" src="img/null.png"/>
    <img id="corner4" style="position:relative;width:54px;height:55px;left:103px;top:-157px" src="img/free.png" />
</div>

<!-- 右下右小图5 -->
<div id="indexList5" style="position:absolute;left:932px;top:471px;width:280px;height:157px">
	<img id="indexImg5" src="img/null.png"/>
    <img id="corner5" style="position:relative;width:54px;height:55px;left:226px;top:-157px" src="img/free.png" />
</div>

<!-- 焦点图片 -->
<div id="focusDiv" style="position:absolute;left:68px;top:100px;width:113px;height:103px; z-index:2;"><img id="focusImg" src="img/null.png"/></div>

<!-- 追剧更新提示 -->
<div id="follow" style="display:none;">
    <div style="position:absolute;left:0px;top:0px;width:1280px;height:720px; background-color:black; opacity:0.9; z-index:1;"></div>
    <div style="position:absolute;left:0px;top:190px;width:1280px;height:50px;line-height:50px; text-align:center;color:#3789f6;font-size:34px; z-index:2;">您观看的这些剧集已更新</div>
    <div style="position:absolute;left:173px;top:244px;width:934px;height:3px;background:url(img/followLine.png);z-index:2;"></div>
    <div id="follow0" class="followImg"><div id="followName0" class="followName"></div></div>
    <div id="follow1" class="followImg"><div id="followName1" class="followName"></div></div>
    <div id="follow2" class="followImg"><div id="followName2" class="followName"></div></div>
    <div id="follow3" class="followImg"><div id="followName3" class="followName"></div></div>
    <div id="follow4" class="followImg"><div id="followName4" class="followName"></div></div>
    <div id="follow5" class="followImg"><div id="followName5" class="followName"></div></div>
</div>
</body>
</html>