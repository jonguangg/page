<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="page-view-size" content="1280*720">
		<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
		<title>我的片库</title> 
<style type="text/css">
*{margin:0px; padding:0px;}
td{ font-size: 20px; text-align:center; vertical-align:middle; color:#ffffff; }
</style>
<!--<script>
//设置默认按钮
iPanel.focus.borders= 0;
iPanel.focus.defaultFocusColor ="#FFCC00";
iPanel.defaultFocusColor="#FFCC00";  //颜色
</script>-->
<script type="text/javascript">
var area = 0;
var menuPos = 0;
var menusPos= 0;
var listPos = 5;  //条目当前位置
var changePos=0;
var topPos=0;
var listSize = 10; //条目数
var url = window.location.href;
var wordSize = 9;
var scrollPos=0;
var curIndex=0;
var length=10; 

function $(id){return document.getElementById(id);}

var posArray = [0,0,0,0,0,0,0,0,0,0,0]; //记录pos位置

var listArray=[//百事通专区
	{nums:"1",title:"匆匆那年",url:"../paihang/paihang1.htm",deadLine:"2015年07月14日16:35:30"},
	{nums:"2",title:"超能陆战队（中文配音戢戢戢戢戢戢戢戢戢戢戢戢戢戢戢戢）",url:"../paihang/paihang2.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"3",title:"大喜临门",url:"../paihang/paihang3.htm",deadLine:"2015年07月18日14:35:30"},
	{nums:"4",title:"地牢围攻3",url:"../paihang/paihang4.htm",deadLine:"2015年07月19日14:35:30"},
	{nums:"5",title:"第七谎言",url:"../paihang/paihang5.htm",deadLine:"2015年07月20日14:35:30"},
	{nums:"6",title:"定制伴郎",url:"../paihang/paihang6.htm",deadLine:"2015年07月21日14:35:30"},
	{nums:"7",title:"飓风营救3",url:"../paihang/paihang7.htm",deadLine:"2015年07月22日14:35:30"},
	{nums:"8",title:"飓风营救3",url:"../paihang/paihang8.htm",deadLine:"2015年07月23日14:35:30"},	
	{nums:"9",title:"魔法黑森林",url:"../paihang/paihang9.htm",deadLine:"2015年07月24日14:35:30"},
	{nums:"10",title:"大喜临门",url:"../paihang/paihang10.htm",deadLine:"2015年07月25日14:35:30"},
	{nums:"11",title:"地牢围攻3",url:"../paihang/paihang11.htm",deadLine:"2015年07月26日14:35:30"},
	{nums:"12",title:"第七谎言",url:"../paihang/paihang12.htm",deadLine:"2015年07月27日14:35:30"},
	{nums:"13",title:"定制伴郎",url:"../paihang/paihang13.htm",deadLine:"2015年07月28日14:35:30"},
	{nums:"14",title:"飓风营救3",url:"../paihang/paihang14.htm",deadLine:"2015年07月29日14:35:30"},
	{nums:"15",title:"魔法黑森林",url:"../paihang/paihang15.htm",deadLine:"2015年07月30日14:35:30"},	
	{nums:"16",title:"大喜临门",url:"../paihang/paihang16.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"17",title:"地牢围攻3",url:"../paihang/paihang17.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"18",title:"第七谎言",url:"../paihang/paihang18.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"19",title:"定制伴郎",url:"../paihang/paihang19.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"20",title:"飓风营救3",url:"../paihang/paihang20.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"21",title:"魔法黑森林",url:"../paihang/paihang21.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"22",title:"定制伴郎",url:"../paihang/paihang22.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"23",title:"飓风营救3",url:"../paihang/paihang23.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"24",title:"魔法黑森林",url:"../paihang/paihang24.htm",deadLine:"2015年07月17日14:35:30"},	
	{nums:"25",title:"大喜临门",url:"../paihang/paihang25.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"26",title:"地牢围攻3",url:"../paihang/paihang26.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"27",title:"第七谎言",url:"../paihang/paihang27.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"28",title:"定制伴郎",url:"../paihang/paihang28.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"29",title:"飓风营救3",url:"../paihang/paihang29.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"30",title:"魔法黑森林",url:"../paihang/paihang30.htm",deadLine:"2015年07月17日14:35:30"},	
	{nums:"31",title:"第七谎言",url:"../paihang/paihang31.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"32",title:"定制伴郎",url:"../paihang/paihang32.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"33",title:"飓风营救3",url:"../paihang/paihang33.htm",deadLine:"2015年07月17日14:35:30"},	
	{nums:"32",title:"定制伴郎",url:"../paihang/paihang32.htm",deadLine:"2015年07月17日14:35:30"},
	{nums:"33",title:"飓风营救3",url:"../paihang/paihang33.htm",deadLine:"2015年07月17日14:35:30"},			
	{nums:"34",title:"魔法之家",url:"../paihang/paihang34.htm",deadLine:"2015年07月17日14:35:30"}
];
function menuFocus(__num){
	$("menu"+menusPos).src = "../img/tm.gif";
	menusPos+=__num;
	if(menusPos<0)menusPos=2-1;
	else if(menusPos>2-1)menusPos=0;
	$("menu"+menusPos).src = "../img/homeFocus"+menusPos+".png";
}

function showList(){
	listPos = posArray[menuPos];
	var now = new Date();
	var position = (parseInt((listPos+listSize)/listSize)-1)*listSize; //当前页的第一个	
	for(i=0; i<listSize; i++){
		if(position+i<listArray.length){
			$("zoneImg"+i).style.backgroundImage =  "url('../baiShiTong/"+(position+i)+".png')";
			$("zoneBg"+i).style.backgroundImage =  "url('../img/zoneBg.png')";			
			$("zoneTxt"+i).innerHTML = listArray[position+i].title.slice(0,wordSize);
			$("zoneTxt"+i).style.color = "#ffffff";
			$("deadLine"+i).style.color = "red";
			
			var endDate = new Date(listArray[position+i].deadLine.substr(0,4),listArray[position+i].deadLine.substr(5,2)-1,listArray[position+i].deadLine.substr(8,2),listArray[position+i].deadLine.substr(11,2),listArray[position+i].deadLine.substr(14,2),listArray[position+i].deadLine.substr(17,2));
			var hours = Math.floor((endDate.getTime()-now.getTime())/60/60/1000);
			var minutes = Math.floor((endDate.getTime()-now.getTime())/60/1000);
			
			if(hours<1 && minutes>0){
			$("deadLine"+i).innerHTML = "还有"+minutes+"分钟过期";		
			}else if(hours<1 && minutes<0){
			$("deadLine"+i).innerHTML = "该节目已过期";					
		    }else $("deadLine"+i).innerHTML ="还有"+ hours+"小时过期";	
							  
		}
		else {
			$("zoneImg"+i).style.backgroundImage = "url()";
			$("zoneBg"+i).style.backgroundImage =  "url()";				
			$("zoneTxt"+i).innerHTML = "";
			$("deadLine"+i).innerHTML = "";			
		}
	}
	if(listArray.length<listSize+1){
	$("pdown").style.backgroundImage = "url()";		}
	pageNum();
}

function listFocus(__num){
	listPos = posArray[menuPos];
	var currPage = parseInt((listPos+listSize)/listSize);//当前第几页	
	$("zoneTxt"+listPos%listSize).innerHTML = listArray[listPos].title.slice(0,wordSize);
	$("zoneTxt"+listPos%listSize).style.color = "#fff";
//	$("deadLine"+listPos%listSize).style.color = "red";	
	$("zoneFocus"+listPos%listSize).style.backgroundImage = "url()";
	
	var tempPos = listPos;
	listPos+=__num;

	if(listPos<0){ //焦点定位到当前页第一个
	   listPos=10*(currPage-1)
	}
			
	else if(listPos>listArray.length-1)
		{
		listPos = tempPos;
		listFocus(0);
		return;
		}
	//如果翻了页，条目重新输出
	if(parseInt((listPos+listSize)/listSize)!=parseInt((tempPos+listSize)/listSize))
	{
		if(__num<0)
		{showList();
		}
		else{
			listPos = tempPos;
			listFocus(0);
			return;
		     }
	}
	
	$("zoneFocus"+listPos%listSize).style.backgroundImage = "url(../img/zoneFocus.png)";
	$("zoneTxt"+listPos%listSize).style.color = "#ffcc00";
//	$("deadLine"+listPos%listSize).style.color = "red";	
		
	if(listArray[listPos].title.length>wordSize)
	{
		$("zoneTxt"+listPos%listSize).innerHTML = '<marquee direction="left" width="88%" scrollamonut="15" scrolldelay="100">'+listArray[listPos].title +'</marquee>';
	}
	
	
	posArray[menuPos] = listPos;
}

function pageUp(){
	listPos-=listSize;
	if(listPos<0){
		listPos+=listSize;	
	}
	posArray[menuPos] = listPos;
	showList();
}

function pageDown(){
	listPos+=listSize;
		if(listPos>listArray.length-1){
		if(parseInt(listPos/listSize)!=parseInt((listArray.length-1+listSize)/listSize))listPos = listArray.length-1;
		else listPos-=listSize;
	}
	posArray[menuPos] = listPos;
	showList();
}

function pagelast(){
	listPos = (parseInt((listPos+listSize)/listSize)-1)*listSize+listSize-1;//当前页的第一个	
	if(listPos>listArray.length-1)listPos=listArray.length-1;
}

//页码
function pageNum(){
	listPos = posArray[menuPos];
	var currPage = parseInt((listPos+listSize)/listSize);//当前第几页
	var allPage = parseInt((listArray.length-1+listSize)/listSize);//总共多少页
	$("page").innerHTML = "第"+currPage+"页"+"/"+"共"+allPage+"页"; 
}

document.onsystemevent = grabEvent;
document.onkeypress = grabEvent;
document.onirkeypress=grabEvent;
function grabEvent(){
	listPos = posArray[menuPos];
	var currPage = parseInt((listPos+listSize)/listSize);//当前第几页
	var allPage = parseInt((listArray.length-1+listSize)/listSize);//总共多少页	
	var key_code = event.which;
//	alert(key_code);
	switch(key_code){
		case 1://up
		if(area==0){
			if(listPos-10*(currPage-1)>4){//焦点在下
		listFocus(-5);				
		   }
		 }
		 
	    else if(area==1){
	    area=0;
	   	$("pdown").style.backgroundImage = "url(../img/pdown0.png)";
        $("zoneFocus"+listPos%listSize).style.backgroundImage = "url(../img/zoneFocus.png)";			 
		}
		
		else if(area==2){
		area=0;
	   	$("pup").style.backgroundImage = "url(../img/pup0.png)";
        $("zoneFocus"+listPos%listSize).style.backgroundImage = "url(../img/zoneFocus.png)";						
		}

		return 0;
		break;	

		case 2://down
		  if(area==0 && (listPos-10*(currPage-1))<5 && (listPos+5) < listArray.length){//焦点在上可下移
			 listFocus(5);
		  }
		 else if(area==0 && (listPos-10*(currPage-1))<5 && (listPos+6) > listArray.length && currPage == allPage){//焦点在上,不可下移,最后一页
			  area=2;
			  $("pup").style.backgroundImage = "url(../img/pup1.png)";
			  $("zoneFocus"+listPos%listSize).style.backgroundImage = "url()";			  
		   }
		  else if(area==0 && (listPos-10*(currPage-1))<5 && (listPos+6) > listArray.length && currPage < allPage){//非最后一页
			  area=1;
			  $("pdown").style.backgroundImage = "url(../img/pdown1.png)";
			  $("zoneFocus"+listPos%listSize).style.backgroundImage = "url()";			  
			  }
		  else if(area==0 && (listPos-10*(currPage-1)) > 4 && currPage==allPage){//焦点在下,最后一页
			  area=2;
			  $("pup").style.backgroundImage = "url(../img/pup1.png)";
			  $("zoneFocus"+listPos%listSize).style.backgroundImage = "url()";			  
		   }
		  else if(area==0 && (listPos-10*(currPage-1)) > 4 && currPage < allPage){//焦点在下,非最后一页{
			  area=1;
			  $("pdown").style.backgroundImage = "url(../img/pdown1.png)";
			  $("zoneFocus"+listPos%listSize).style.backgroundImage = "url()";			
		   }
		   
			return 0;
			break;	
        
		case 3://left
			if(area==0){
				listFocus(-1);
			}
			
			else if(area==1 && currPage<allPage && currPage>1)
			    {
			area=2;
			$("pup").style.backgroundImage = "url(../img/pup1.png)";	
			$("pdown").style.backgroundImage = "url(../img/pdown0.png)";					  
			    }
			return 0;
			break;

		case 372://P-上一页
			if(area==0 && currPage==2){
			  $("pup").style.backgroundImage = "url()";
			  }else if(currPage==allPage){
			  $("pdown").style.backgroundImage = "url(../img/pdown0.png)";				  
			}
					
			if(area==0 && currPage>1){
			pageUp();
			listFocus(-100);
			}
			return 0;
			break;	  
					  				
		case 4: //right
			if(area==0 && listPos<listArray.length-1){
				listFocus(1);
			}
			
			else if(area==2 && currPage<allPage)
			{
			    area=1;
				$("pdown").style.backgroundImage = "url(../img/pdown1.png)";
				$("pup").style.backgroundImage = "url(../img/pup0.png)";				
			}
			return 0;
			break;	
			
		case 373://P+下一页
			if(area==0 && currPage==1){
			 $("pup").style.backgroundImage = "url(../img/pup0.png)";	       
			}else if(currPage==allPage-1){
			 $("pdown").style.backgroundImage = "url()";
			}
			  					
		    if(area==0 && currPage<allPage){
			pageDown();
			listFocus(-100);				
			}

		    return 0;
			break;
						
		case 13: //enter
			doSelect();
		    return 0;
			break;

		case 340: //back
			history.go(-1);
			break;	
			
		case 339://exit
			window.close();
			return 0;
			break;
	}
}

function doSelect(){
	listPos = posArray[menuPos];
	var currPage = parseInt((listPos+listSize)/listSize);//当前第几页
	var allPage = parseInt((listArray.length-1+listSize)/listSize);//总共多少页	
	if(area==0)	{
		location.href = listArray[listPos].url;
	}
	
	else if(area==1){
		pageDown();
		listFocus(-100);
		
	    if(currPage==1){
		 $("pup").style.backgroundImage = "url(../img/pup0.png)";	       
		}
		
       else if(currPage==allPage-1){
		area=2;		
        $("pdown").style.backgroundImage = "url()";
        $("pup").style.backgroundImage = "url(../img/pup1.png)";	
		}

	}
	
	else if(area==2){
    	pageUp();
		listFocus(-100);		
		if(currPage==2){
	    $("pup").style.backgroundImage = "url()";
		$("pdown").style.backgroundImage = "url(../img/pdown1.png)";
		area=1;	
		}else{
		$("pdown").style.backgroundImage = "url(../img/pdown0.png)";
		$("pup").style.backgroundImage = "url(../img/pup1.png)";
		}
	}
}


function init(){
	showList();
}
</script>

</head>
<body topmargin="0" leftmargin="0" style="background:url(../img/index_myMovies.png)" onload="init();">
 <div style="z-index:1; position:absolute; left: 100px; top: 120px; width:1080px; height:524px"> 
    <table  width="1080" border="0" cellpadding="0" cellspacing="0" >
			<tr >
				<td id="zoneImg0" width="200" height="208"></td>
				<td width="20" height="208"></td>
				<td id="zoneImg1" width="200" height="208"></td>
			    <td width="20" height="208"></td>
				<td id="zoneImg2" width="200" height="208"></td>
			    <td width="20" height="208"></td>
				<td id="zoneImg3" width="200" height="208"></td>
				<td width="20" height="208"></td>
				<td id="zoneImg4" width="200" height="208"></td>
			</tr>
			<tr>
				<td id="zoneTxt0" width="200" height="22" ></td>
				<td width="20" height="22"></td>
				<td id="zoneTxt1" width="200" height="22"></td>
			    <td  width="20" height="22"></td>
				<td id="zoneTxt2" width="200" height="22"></td>
			    <td width="20" height="22"></td>
				<td id="zoneTxt3" width="200" height="22"></td>
				<td width="20" height="22"></td>
				<td id="zoneTxt4" width="200" height="22"></td>
			</tr>
            <tr>
				<td id="deadLine0" width="200" height="22" ></td>
				<td width="20" height="22"></td>
				<td id="deadLine1" width="200" height="22"></td>
			    <td  width="20" height="22"></td>
				<td id="deadLine2" width="200" height="22"></td>
			    <td width="20" height="22"></td>
				<td id="deadLine3" width="200" height="22"></td>
				<td width="20" height="22"></td>
				<td id="deadLine4" width="200" height="22"></td>
			</tr>
			<tr>
				<td width="200" height="18"></td>
				<td height="18"></td>
				<td width="200" height="18"></td>
			    <td height="18"></td>
				<td width="200" height="18"></td>
			    <td height="18"></td>
				<td width="200" height="18"></td>
				<td height="18"></td>
				<td width="200" height="18"></td>
			</tr>
			<tr>
				<td id="zoneImg5" width="200" height="208"></td>
				<td width="20" height="208"></td>
				<td id="zoneImg6" width="200" height="208"></td>
			    <td width="20" height="208"></td>
				<td id="zoneImg7" width="200" height="208"></td>
			    <td width="20" height="208"></td>
				<td id="zoneImg8" width="200" height="208"></td>
				<td width="20" height="208"></td>
				<td id="zoneImg9" width="200" height="208"></td>
			</tr>
			<tr>
				<td id="zoneTxt5" width="200" height="22"></td>
				<td width="16" height="22"></td>
				<td id="zoneTxt6" width="200" height="22"></td>
			    <td width="16" height="22"></td>
				<td id="zoneTxt7" width="200" height="22"></td>
			    <td width="15" height="22"></td>
				<td id="zoneTxt8" width="200" height="22"></td>
				<td width="16" height="22"></td>
				<td id="zoneTxt9" width="200" height="22"></td>
			</tr>
            <tr>
				<td id="deadLine5" width="200" height="22" ></td>
				<td width="20" height="22"></td>
				<td id="deadLine6" width="200" height="22"></td>
			    <td  width="20" height="22"></td>
				<td id="deadLine7" width="200" height="22"></td>
			    <td width="20" height="22"></td>
				<td id="deadLine8" width="200" height="22"></td>
				<td width="20" height="22"></td>
				<td id="deadLine9" width="200" height="22"></td>
			</tr>            
  </table>
</div>

<div style="z-index:1;position:absolute; left: 97px; top: 117px; width:1086px; height:536px"> 
   <table  width="1086" border="0" cellpadding="0" cellspacing="0" >
			<tr>
				<td id="zoneFocus0" width="206" height="258"style="background:url('../img/zoneFocus.png') no-repeat"></td>
				<td width="14" height="258"></td>
				<td id="zoneFocus1" width="206" height="258"style="background:url() no-repeat"></td>
			    <td width="14" height="258"></td>
				<td id="zoneFocus2" width="206" height="258"style="background:url() no-repeat"></td>
			    <td width="14" height="258"></td>
				<td id="zoneFocus3" width="206" height="258"style="background:url() no-repeat"></td>
				<td width="14" height="258"></td>
				<td id="zoneFocus4" width="206" height="258"style="background:url() no-repeat"></td>
			</tr>
			<tr>
				<td width="206" height="14"></td>
				<td height="14"></td>
				<td width="206" height="14"></td>
			    <td height="14"></td>
				<td width="206" height="14"></td>
			    <td height="14"></td>
				<td width="206" height="14"></td>
				<td height="14"></td>
				<td width="206" height="14"></td>
			</tr>
			<tr>
				<td id="zoneFocus5" width="206" height="258"style="background:url() no-repeat"></td>
				<td width="14" height="258"></td>
				<td id="zoneFocus6" width="206" height="258"style="background:url() no-repeat"></td>
			    <td width="14" height="258"></td>
				<td id="zoneFocus7" width="206" height="258"style="background:url() no-repeat"></td>
			    <td width="14" height="258"></td>
				<td id="zoneFocus8" width="206" height="258"style="background:url() no-repeat"></td>
				<td width="14" height="258"></td>
				<td id="zoneFocus9" width="206" height="258"style="background:url() no-repeat"></td>
			</tr>
  </table>
</div>

<div z-index: -1; style="position:absolute; left: 100px; top: 120px; width:1080px; height:524px"> 
   <table  width="1080" border="0" cellpadding="0" cellspacing="0" >
			<tr>
				<td id="zoneBg0" width="200" height="252"style="background:url('../img/zoneBg.png') no-repeat"></td>
				<td width="20" height="252"></td>
				<td id="zoneBg1" width="200" height="252"style="background:url() no-repeat"></td>
			    <td width="20" height="252"></td>
				<td id="zoneBg2" width="200" height="252"style="background:url() no-repeat"></td>
			    <td width="20" height="252"></td>
				<td id="zoneBg3" width="200" height="252"style="background:url() no-repeat"></td>
				<td width="20" height="252"></td>
				<td id="zoneBg4" width="200" height="252"style="background:url() no-repeat"></td>
			</tr>
			<tr>
				<td width="200" height="20"></td>
				<td height="20"></td>
				<td width="200" height="20"></td>
			    <td height="20"></td>
				<td width="200" height="20"></td>
			    <td height="20"></td>
				<td width="200" height="20"></td>
				<td height="20"></td>
				<td width="200" height="20"></td>
			</tr>
			<tr>
				<td id="zoneBg5" width="200" height="258"style="background:url() no-repeat"></td>
				<td width="20" height="252"></td>
				<td id="zoneBg6" width="200" height="258"style="background:url() no-repeat"></td>
			    <td width="20" height="252"></td>
				<td id="zoneBg7" width="200" height="258"style="background:url() no-repeat"></td>
			    <td width="20" height="252"></td>
				<td id="zoneBg8" width="200" height="258"style="background:url() no-repeat"></td>
				<td width="20" height="252"></td>
				<td id="zoneBg9" width="200" height="258"style="background:url() no-repeat"></td>
			</tr>
  </table>
</div>

<div id="page" style="position: absolute; left: 694px; top: 658px; width: 185px; height: 40px; text-align: center; line-height: 40px; color: #000000; font-size: 28px;">1/3</div>

<div id="pup" style="z-index: 100; position: absolute; left: 904px; top: 655px; width: 130px; height: 40px; line-height: 36px; background: url() no-repeat"></div>

<div id="pdown" style="z-index: 100; position: absolute; left: 1048px; top: 655px; width: 130px; height: 40px; line-height: 36px; background: url('../img/pdown0.png') no-repeat""></div>

</body>
</html>